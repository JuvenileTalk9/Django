# プロジェクトを作る

## startproject
Djangoで作るWebアプリは、"プロジェクト"という単位で管理されます。プロジェクトには、実行モジュール（Pythonのソースファイル）、ブラウザに表示されるHTMLファイル、各種設定ファイルなどの一式が格納されます。プロジェクトとプロジェクトに含まれる必要な初期ファイルは、Djangoの```startproject```コマンドを使うことで自動的に生成されます。開発者は、生成されたプロジェクトの初期ファイルを編集したり、新しいファイルを追加したりすることで、Webアプリを開発していきます。

[2章](https://github.com/JuvenileTalk9/Django/02_環境構築/環境構築.md)で作成した```django```仮想環境に入り、django適当なディレクトリで以下コマンドを実行て、```sampleproject```を作成します。

```sh
$ django-admin startproject sampleproject
```

以下のファイルを含む```sampleproject```ディレクトリが作成されたことが確認できると思います。

```sh
sampleproject
│  manage.py
│
└─sampleproject
        asgi.py
        settings.py
        urls.py
        wsgi.py
        __init__.py
```

これらのファイルの役割について、一つ一つ確認していきます。

## プロジェクトに生成されたモジュール

### manage.pyt

プロジェクトのトップレベルに配置されたモジュールです。中身はこのようになっています。

```py
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sampleproject.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()
```

色々書かれていますが、重要なコードは以下の2行のみです。

```py
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sampleproject.settings')
execute_from_command_line(sys.argv)
```

まず1行目で、```DJANGO_SETTING_MODULE```という環境変数に、```sampleproject.settings```を割り当てています。```sampleproject.settings```は先程生成した```sampleproject/setting.py```を示す名前空間となっているため、環境変数```DJANGO_SETTING_MODULE```を使うことで、```setting.py```にアクセスすることができるようになります。

2行目は、コマンドライン引数で与えられたコマンドを実行する部分です。実行は、Djangoの組み込み関数```django.core.management.execute_from_command_line```が使用されます。実行されるコマンドについては、後ほど説明します。

基本的に、このファイルを開発者が編集することはありません。開発者が編集するのは、次以降のファイルになります。

### \_\_init\_\_.py

これはPython一般に使用されているモジュールで、モジュールのインポート処理や、初期化処理などを記載します。デフォルトでは何も記載されていません。

### urls.py

ルーティングを管理するためのモジュールです。デフォルトでは中身はこのようになっています。



[目次へ戻る](https://github.com/JuvenileTalk9/Django)